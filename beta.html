<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coming Soon - NexusOS</title>
    <meta name="NexusOS" content="NexusX">
    
    <!-- Import Map for React 19 Canary & Motion 12 -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@19?dev",
            "react-dom/client": "https://esm.sh/react-dom@19/client?dev",
            "motion/react": "https://esm.sh/motion@12.0.0-alpha.2/react",
            "canvas-confetti": "https://esm.sh/canvas-confetti@1.9.2"
        }
    }
    </script>
    
    <!-- Babel for in-browser JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap');

        :root {
            --accent: #a4c8f2; 
            --bg-dark: #10121a; 
            --glass-bg: rgba(255, 255, 255, 0.04); 
            --glass-border: rgba(255, 255, 255, 0.15); 
            --text-main: #e8eaf2;
            --text-muted: #8c909c;
            --blur-strength: 40px; 
        }

        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
        }

        #root {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
            background-image: radial-gradient(circle at center, rgba(30, 35, 50, 0.8) 0%, rgba(16, 18, 26, 1) 70%);
        }

        .text-gradient {
            background: linear-gradient(135deg, #ffffff 20%, var(--accent) 100%);
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
        }
        
        .shadow-glow {
            text-shadow: 0 0 15px rgba(164, 200, 242, 0.6);
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        // Motion 12 uses 'motion/react' for React bindings
        import { motion, useMotionValue, useTransform, useSpring } from 'motion/react';
        import confetti from 'canvas-confetti';

        // --- Starfield Component ---
        const Starfield = () => {
            const canvasRef = useRef(null);

            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let width, height, particles = [];

                const resize = () => {
                    width = canvas.width = window.innerWidth;
                    height = canvas.height = window.innerHeight;
                };

                class Particle {
                    constructor() {
                        this.x = Math.random() * width;
                        this.y = Math.random() * height;
                        this.size = Math.random() * 1.5;
                        this.speedX = Math.random() * 0.1 - 0.05;
                        this.speedY = Math.random() * 0.1 - 0.05;
                    }
                    update() {
                        this.x += this.speedX;
                        this.y += this.speedY;
                        if (this.x > width) this.x = 0;
                        if (this.y > height) this.y = 0;
                    }
                    draw() {
                        ctx.fillStyle = '#e8eaf2';
                        ctx.globalAlpha = this.size / 2;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }

                const init = () => {
                    particles = [];
                    for (let i = 0; i < 70; i++) particles.push(new Particle());
                };

                const loop = () => {
                    ctx.clearRect(0, 0, width, height);
                    particles.forEach(p => { p.update(); p.draw(); });
                    requestAnimationFrame(loop);
                };

                window.addEventListener('resize', resize);
                resize();
                init();
                const animationId = requestAnimationFrame(loop);

                return () => {
                    window.removeEventListener('resize', resize);
                    cancelAnimationFrame(animationId);
                };
            }, []);

            return (
                <canvas 
                    ref={canvasRef} 
                    style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', zIndex: -1, opacity: 0.3 }} 
                />
            );
        };

        // --- Nexus Pill (Interactive Badge) ---
        const NexusPill = () => {
            const pillRef = useRef(null);
            
            // Motion 12 MotionValues
            const x = useMotionValue(0); 
            const y = useMotionValue(0);
            
            // State
            const [text, setText] = useState("NexusOS 19 Canary");
            const [isOverloading, setIsOverloading] = useState(false);
            const [isBouncing, setIsBouncing] = useState(false);
            
            // Logic Refs
            const clickCount = useRef(0);
            const clickTimer = useRef(null);
            const holdTimer = useRef(null);
            const heavyLoadInterval = useRef(null);
            const bounceRequest = useRef(null);
            const velocity = useRef({ x: 6, y: 6 });

            useEffect(() => {
                x.set(window.innerWidth - 200); 
                y.set(window.innerHeight - 80);
            }, []);

            const handleClick = () => {
                clickCount.current++;
                clearTimeout(clickTimer.current);

                if (clickCount.current === 3) {
                    if (!isBouncing) startBounce();
                    clickCount.current = 0;
                } else {
                    clickTimer.current = setTimeout(() => {
                        clickCount.current = 0;
                    }, 350);
                }
            };

            const startBounce = () => {
                setIsBouncing(true);
                const animateBounce = () => {
                    let nextX = x.get() + velocity.current.x;
                    let nextY = y.get() + velocity.current.y;
                    const rect = pillRef.current?.getBoundingClientRect();
                    
                    if (!rect) return;

                    // Screen Collision
                    if (nextX + rect.width >= window.innerWidth || nextX <= 0) {
                        velocity.current.x *= -1;
                        checkCorner(nextX, nextY, rect.width, rect.height);
                    }
                    if (nextY + rect.height >= window.innerHeight || nextY <= 0) {
                        velocity.current.y *= -1;
                        checkCorner(nextX, nextY, rect.width, rect.height);
                    }

                    x.set(nextX);
                    y.set(nextY);
                    bounceRequest.current = requestAnimationFrame(animateBounce);
                };
                bounceRequest.current = requestAnimationFrame(animateBounce);
            };

            const checkCorner = (px, py, w, h) => {
                const margin = 20;
                const isCorner = (px <= margin || px + w >= window.innerWidth - margin) && 
                                 (py <= margin || py + h >= window.innerHeight - margin);
                
                if (isCorner) {
                    confetti({ 
                        particleCount: 150, 
                        spread: 80, 
                        origin: { x: px / window.innerWidth, y: py / window.innerHeight } 
                    });
                }
            };

            const handlePointerDown = () => {
                holdTimer.current = setTimeout(() => {
                    setText("SYSTEM OVERLOAD");
                    setIsOverloading(true);
                    
                    // Simulate Thread Blocking (The "Lag")
                    heavyLoadInterval.current = setInterval(() => {
                        const kill = Date.now() + 200;
                        while (Date.now() < kill) {
                            Math.sqrt(Math.random() * Math.random());
                        }
                        // Noise
                        window.history.replaceState({}, '', '#' + Math.random().toString(16).substring(5));
                    }, 50);
                }, 800);
            };

            const restore = () => {
                clearTimeout(holdTimer.current);
                clearInterval(heavyLoadInterval.current);
                setText("NexusOS 19.3.0");
                setIsOverloading(false);
            };

            return (
                <motion.div
                    ref={pillRef}
                    onClick={handleClick}
                    onPointerDown={handlePointerDown}
                    onPointerUp={restore}
                    onPointerLeave={restore}
                    style={{
                        x, y,
                        position: 'fixed',
                        left: 0, top: 0,
                        zIndex: 100000,
                        padding: '8px 18px',
                        borderRadius: 50,
                        background: isOverloading ? 'rgb(220, 20, 60)' : 'rgba(15, 15, 15, 0.4)',
                        backdropFilter: 'blur(12px)',
                        border: '1px solid rgba(255, 255, 255, 0.15)',
                        color: '#ffffff',
                        fontSize: '12px',
                        fontWeight: 500,
                        cursor: 'crosshair',
                        userSelect: 'none',
                        whiteSpace: 'nowrap',
                        willChange: 'transform'
                    }}
                    transition={{ duration: 0.2 }}
                >
                    {text}
                </motion.div>
            );
        };

        // --- 3D Tilt Card ---
        const TiltCard = () => {
            const mouseX = useMotionValue(0);
            const mouseY = useMotionValue(0);

            // Spring physics for smooth tilt
            const rotateX = useSpring(useTransform(mouseY, (val) => val / 40), { stiffness: 150, damping: 20 });
            const rotateY = useSpring(useTransform(mouseX, (val) => -val / 40), { stiffness: 150, damping: 20 });

            useEffect(() => {
                const handleMove = (e) => {
                    const x = window.innerWidth / 2 - e.pageX;
                    const y = window.innerHeight / 2 - e.pageY;
                    mouseX.set(x);
                    mouseY.set(y);
                };
                const handleLeave = () => {
                    mouseX.set(0);
                    mouseY.set(0);
                };

                document.body.addEventListener('mousemove', handleMove);
                document.body.addEventListener('mouseleave', handleLeave);
                return () => {
                    document.body.removeEventListener('mousemove', handleMove);
                    document.body.removeEventListener('mouseleave', handleLeave);
                };
            }, [mouseX, mouseY]);

            return (
                <motion.div
                    style={{
                        rotateX,
                        rotateY,
                        transformStyle: "preserve-3d",
                        width: '90%',
                        maxWidth: '550px',
                        padding: '3rem 2.5rem',
                        background: 'rgba(255, 255, 255, 0.04)',
                        border: '1px solid rgba(255, 255, 255, 0.15)',
                        borderRadius: '30px',
                        backdropFilter: 'blur(40px)',
                        boxShadow: '0 50px 100px -20px rgba(0, 0, 0, 0.8), 0 0 50px rgba(164, 200, 242, 0.1)',
                        textAlign: 'center',
                    }}
                >
                    <div style={{ transform: "translateZ(50px)", marginBottom: '2rem' }}>
                        <motion.span 
                            animate={{ y: [0, -10, 0] }}
                            transition={{ duration: 5, repeat: Infinity, ease: "easeInOut" }}
                            className="shadow-glow"
                            style={{ display: 'block', fontSize: '4rem', color: 'var(--accent)' }}
                        >
                            ðŸŽ®
                        </motion.span>
                    </div>

                    <h1 className="text-gradient" style={{ 
                        transform: "translateZ(30px)", fontSize: '5rem', fontWeight: 900, 
                        lineHeight: 1.2, margin: '0 0 0.2rem 0', paddingBottom: '10px', letterSpacing: '-1px' 
                    }}>
                        Sorry!
                    </h1>

                    <h2 style={{ 
                        transform: "translateZ(25px)", fontSize: '1.5rem', fontWeight: 500, 
                        marginBottom: '1.5rem', marginTop: 0, color: 'var(--text-main)' 
                    }}>
                        Nothing to test yet.
                    </h2>

                    <p style={{ 
                        transform: "translateZ(20px)", color: 'var(--text-muted)', 
                        fontSize: '1.05rem', lineHeight: 1.7, marginBottom: '2rem' 
                    }}>
                        If there is, it will be <span style={{color: 'var(--accent)'}}>new games</span> or <span style={{color: 'var(--accent)'}}>features</span> here first.
                    </p>

                    <div style={{ transform: "translateZ(25px)", marginBottom: '2.5rem', fontSize: '0.95rem', color: 'var(--text-muted)' }}>
                        Next expected beta: <span style={{color: 'var(--accent)', fontWeight: 600, textShadow: '0 0 10px rgba(164, 200, 242, 0.3)'}}>NexusOS 19.3.0 RC</span>
                    </div>

                    <motion.a 
                        href="https://nexusx.w3spaces.com/" 
                        style={{ 
                            transform: "translateZ(40px)",
                            display: 'inline-block', padding: '14px 40px', 
                            color: 'var(--bg-dark)', background: 'var(--accent)', 
                            borderRadius: '12px', fontWeight: 700, textDecoration: 'none', 
                            boxShadow: '0 10px 30px -10px rgba(164, 200, 242, 0.4)',
                        }}
                        whileHover={{ 
                            z: 45, y: -2, backgroundColor: '#ffffff',
                            transition: { duration: 0.3 }
                        }}
                        whileTap={{ scale: 0.98 }}
                    >
                        Go Home
                    </motion.a>
                </motion.div>
            );
        };

        const App = () => (
            <>
                <Starfield />
                <TiltCard />
                <NexusPill />
            </>
        );

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
